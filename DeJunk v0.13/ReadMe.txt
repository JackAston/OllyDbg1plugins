    记得前一阵上网看到hoto制作的dejunk插件.最近闲得发慌,于是前两天去下载了Ollydbg的API手册,想写个什么插件之类的,顺便也将hoto的dejunk插件下了一个,回来试用,感觉他的插件不合我的胃口,于是就自己写了一个我喜欢的,界面上差别不大,我不想评论插件之间的差别,各位可随意选择使用.这里要感谢hoto,因为其中选择扫描类型的创意来自于他的插件,并且用了他的dejunk配置文件稍做修改成为我的配置文件,省了不少功夫.当然还要感谢Dejunk最初的作者ljtt老大.



更新日志:
2003-9-18
完成了0.1版本,具备了去除大部分花指令的功能,和其它功能,想想应该没有什么需要添加的了.欢迎反馈bug.

2003-9-19
更新为0.11版本,添加直接扫描在CPU窗口中自己选择的指令的功能,扫描类型为用户自定义的默认值.

2003-9-19
更新为0.12版本,添加简单的Log功能(位于插件同目录),因为在使用中有时候想知道到底替换了什么地址的花指令.

2003-9-24
更新为0.13版本.
修正一个Log功能中的bug,这个bug将有可能导致Log中显示的地址计算错误(不影响被清除花指令的程序).
现在在Log显示的地址后增加显示清除花指令所使用的模板名,我想记录这些应该够了吧.
一个微小的性能改进,清除花指令的性能提高1%左右吧(这个不太好计算,根据每个模板长度来的),其实用处不大.
另一个bug修正,这是在写程序时的疏忽,导致直接使用菜单的"Dejunk selection"项无效,但是快捷键有效.
现在可以自行设定是否开启Log功能,可以选择:禁用,启用,启用但ollydbg退出时删除(开启Log或许会有微小的性能影响).
加入修改IsDebuggerPresent返回值的功能.为什么有了IsDebuggerPresent插件我却还要写呢?因为我感到极不方便,每次Reload进程都要重新设置隐藏(他的自动隐藏好像没有什么用!?),在我的插件内,只需选择自动隐藏或禁止即可.
添加GetLastError的功能,它将显示被调试进程产生的最后一次错误,在crack中作用不大,如果你用ollydbg不只是用来crack,应该会有一点用处,至少对我来说算是很有用了.
IsDebuggerPresent和GetLastError我只在xp和2003上测试过.在非NT平台上将自动禁用这2个功能.NT/2K我没有装,没有进行测试.也可以手动禁止这2个功能,设置配置文件中的Extend项,0禁用,1启用.



后记:
    其实最初并不想加入选择扫描类型的功能(怕说我抄袭-_-!),因为就算全部模板一起使用搜索速度也是很快的.只是后来考虑到每个人各自的习惯,并且某些模板不能通用所有的壳才添加了进去.搜索范围限制在0x00000~0xFFFFF以内,因为ollydbg只提供了读内存和写内存的API,我只好读出一块内存,修改好了再写回去,要是读的内存块太大......-_-!.没有提供右键菜单支持,因为我的习惯是快捷键用惯了,何况右键菜单一大串也不好看.为什么是英文界面而不是中文界面?因为我用英文版的ollydbg啊,用中文在里面显得不好看,我讨厌汉化版本的ollydbg,好多翻译不准确,因此我不会写中文的插件,也请各位不要汉化本插件.
    发现一个问题,是ollydbg的,本来怀疑是我的程序的bug,跟踪了一下,发现不是,在写入内存时,如果该处下了断点则该处内存不能被写入,即如果断点下在花指令上(或许不只是保护断点,ollydbg或许会保护其它的,但我没有进行更多测试),断点所在的部分的花指令将不能被写入,建议取消断点后再清除花指令,或者不要将断点设在花指令内.
    我并不想向插件内添加过多的功能,否则会让人搞不清它到底是个插件还是一个大杂烩,我写是因为我想用的更方便,或许0.13就是我的Dejunk插件的最后一个版本了.


flyfancy
flyfancy@21cn.com